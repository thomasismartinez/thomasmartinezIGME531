<!DOCTYPE html>
<head>
    <title>Interruptions</title>
    <!--script src="/sainte-victoire.js" type="module"></script-->
</head>
<body>
    <span id="original"></span>
    <span id="variant"></span>
    <script>
        const drawRect = (x,y,w,h,style,transform='') => {
            return `<rect x="${x}" y="${y}" width="${w}" height="${h}" style="${style}" transform="${transform}" />`
        }

        const drawCircle = (x,y,r,stroke,strokeWidth,fill) => {
            return `<circle cx="${x}" cy="${y}" r="${r}" stroke="${stroke}" stroke-width="${strokeWidth}" fill="${fill}" />`
        }

        const drawEllipse = (cx,cy,rx,ry,style) => {
            return `<ellipse cx="${cx}" cy="${cy}" rx="${rx}" ry="${ry}" style="${style}" />`
        }

        const drawPolygon = (points, style) => {
            return `<polygon points="${points}" style="${style}" />`
        }

        const drawPolyline = (points, style, transform) => {
            return `<polyline points="${points}" style="${style}" transform="${transform}" />`
        }

        const drawLine = (x1,y1,x2,y2,style) => {
            return `<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" style="${style}" />`
        }

        // takes paths as list of strings for ex: ['M 10 80', 'Q 95 10 180 80']
        const drawPath = (paths,style) => {
            const stringifyPaths = () => {
                let str = '';
                console.log(str);
                paths.forEach(path => {
                    str = str.concat(path + " ");
                })
                return str;
            }
            return `<path d="${stringifyPaths()}" style=${style} />`
        }

        const groupShapes = (shapes) => {
            console.log(shapes);
            let shapesStr = '';
            shapes.forEach(shape => {
                shapesStr = shapesStr.concat(shape);
                console.log(shapesStr);
            });
            return `<g>${shapesStr}</g>`;
        }

        const rotate = (x,y,degrees,shape) => {
            return `<g transform='rotate(${degrees},${x},${y})'>${shape}</g>`;
        }

        const translate = (x,y,shape) => {
            return `<g transform='d(${x},${y})'>${shape}</g>`;
        }

        const drawInterruptionsOriginal = (xCount,yCount) => {
            console.log('entering drawInterruptionsOriginal');
            let interruptions = '';
            for (let x = 100; x <= xCount * 100; x += 100) {
                for (let y = 100; y <= yCount * 100; y += 100) {
                    let randRotate = Math.floor(Math.random() * 360);
                    interruptions = interruptions.concat(
                        rotate(
                            x+50, y+50,
                            randRotate,
                            drawLine(x,y,x+100,y+100,'fill: none; stroke: black; stroke-width: 6;'),
                        )
                    );
                }
            }
            return interruptions;
        }

        let xDim = 35;
        let yDim = 35;

        window.onload = () => {createSVGs(xDim,yDim)};

        const createSVGs = (x,y) => {
            // original
            document.getElementById('original').innerHTML =
                `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${(x+2)*100} ${(y+2)*100}" width="1000">
                    ${drawRect(0,0,(x+2)*100,(y+2)*100,'fill: #e2e2e2')}
                    ${drawInterruptionsOriginal(x,y)}
                </svg>`;
            
            // variant
            document.getElementById('variant').innerHTML =
                `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${(x+2)*100} ${(y+2)*100}" width="1000">
                    ${drawRect(0,0,(x+2)*100,(y+2)*100,'fill: #e2e2e2')}
                    ${drawInterruptionsOriginal(x,y)}
                </svg>`;
        }
    </script>
</body>